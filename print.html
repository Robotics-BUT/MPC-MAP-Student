<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>MPC-MAP</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="resources/index.html">Overview</a></li><li class="chapter-item expanded affix "><a href="resources/assignment_1_sensor_modeling/text.html">Week 2 - Sensor Modeling</a></li><li class="chapter-item expanded affix "><a href="resources/assignment_2_motion_control/text.html">Week 3 - Motion Control</a></li><li class="chapter-item expanded affix "><a href="resources/assignment_3_particle_filter/text.html">Week 4 - Particle Filter</a></li><li class="chapter-item expanded affix "><a href="resources/assignment_4_kalman_filter/text.html">Week 5 - Kalman Filter</a></li><li class="chapter-item expanded affix "><a href="resources/assignment_5_path_planning/text.html">Week 6 - Path Planning</a></li><li class="chapter-item expanded affix "><a href="resources/simulator/text.html">Simulator</a></li><li class="chapter-item expanded affix "><a href="resources/semester_project/text.html">Semester Project</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">MPC-MAP</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="readme"><a class="header" href="#readme">Readme</a></h1>
<p>These are the online resources for the MPC-MAP course.</p>
<p>See the semester project and assignment pages for detail information.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="week-2---sensor-modeling"><a class="header" href="#week-2---sensor-modeling">Week 2 - Sensor Modeling</a></h1>
<p>Using MATLAB script, simulate the simple 1D map building process using the simulated measurement and self-proposed Sensor Model.</p>
<p>Create a single A4 report that will describe your approach to the exercise (3-6 sentences for each task and picture, if makes sense).</p>
<h2 id="task-1"><a class="header" href="#task-1">Task 1</a></h2>
<p>Define parameters of your simulation</p>
<ul>
<li>Distance of the obstacle x</li>
<li>Standard deviation of your sensor œÉ</li>
<li>Discrete map parameters (cell size c and covered area d)</li>
</ul>
<p>Note: Choose these values with the idea of visualizing your simulation. The visual outputs simulated for parameters of x=100m and œÉ=0.001m c=0.001m, d=200m will be useless.</p>
<h2 id="task-2"><a class="header" href="#task-2">Task 2</a></h2>
<p>In the script file, implement the following functions:</p>
<ul>
<li>The ‚Äúmeasure‚Äù function will return a single measurement sample with a normal distribution of (Œº=obstacle_distance, œÉ=sensor_std_dev).</li>
<li>The ‚Äúget_positive_sensor_model‚Äù; p(z | m_o); function will return gaussian-based obstacle probability distribution function for the entire map space.</li>
<li>Complementary implement also the ‚Äúget_neg_sensor_model‚Äù; p(z | m_e).</li>
</ul>
<h2 id="task-3"><a class="header" href="#task-3">Task 3</a></h2>
<p>Create a simulation of the mapping process. Generate 5-10 measurement samples and for each of them generate P(ùëö^o | ùëß) distribution using the sensor model and update the probability distribution of the obstacles in the map P(ùëö^o).
Document the simulation of the map building process with several images, especially the final state of the map model.</p>
<h2 id="notes"><a class="header" href="#notes">Notes</a></h2>
<p>p(z | m_o)_a - positive sensor model (prob. that cell a is occupied, if we measured distance z)</p>
<p>p(z | m_e)_a - negative sensor model (prob. that cell a is empty, if we measured distance z)</p>
<p>p(m_o | z)_a - inverse sensor model (map; probability that cell a is occupied, if we measured distance z) </p>
<img src="resources/assignment_1_sensor_modeling/imgs/sm.png" alt="sensor model" width="50%"/>
<img src="resources/assignment_1_sensor_modeling/imgs/ism.png" alt="inverse sensor model" width="50%"/>
<h2 id="submission"><a class="header" href="#submission">Submission</a></h2>
<p>Send the report and all related MATLAB scripts at adam.ligocki@vutbr.cz.
MATLAB script must be executable without errors and has to generate all graphical outputs that are in the report.
Deadline: Spring Semester 2023, Week 1, Sunday 23:59.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="week-3---motion-control"><a class="header" href="#week-3---motion-control">Week 3 - Motion Control</a></h1>
<p>Get acquainted with the simulator utilized for the semestral project and implement a simple path-following algorithm.</p>
<p>Create a single A4 report that will describe your approach to the exercise (3-6 sentences for each task and a picture, if it makes sense).</p>
<h2 id="task-1-1"><a class="header" href="#task-1-1">Task 1</a></h2>
<p>Download the simulator from Github: <a href="https://github.com/Robotics-BUT/MPC-MAP-Student">https://github.com/Robotics-BUT/MPC-MAP-Student</a></p>
<p>Create a new map consisting of 4 outer walls and a single inner wall at arbitrary position. Look into example maps located in the ‚Äöresources‚Äò folder and try to identify meaning of individual parameters by means of the reverse engineering.</p>
<h2 id="task-2-1"><a class="header" href="#task-2-1">Task 2</a></h2>
<p>Define three test trajectories of different kind, for example:</p>
<ul>
<li>straight line,</li>
<li>circular arc,</li>
<li>sine wave.</li>
</ul>
<p>A trajectory is defined as a sequence of (x, y) waypoints. Note that the trajectory stored in the <code>public_vars.path</code> variable is visualized by the simulator.</p>
<h2 id="task-3-1"><a class="header" href="#task-3-1">Task 3</a></h2>
<p>Choose arbitrary path-following algorithm and implement it to make the robot follow a straight line. Use the variable <code>private_vars.agent_pose</code> to get the true pose of the robot. Discuss how parameters of the chosen method affect the quality of the robot control.</p>
<h2 id="submission-1"><a class="header" href="#submission-1">Submission</a></h2>
<p>Send the report and all related MATLAB scripts to <a href="mailto:resources/assignment_2_motion_control/tomas.lazna@ceitec.vutbr.cz">tomas.lazna@ceitec.vutbr.cz</a>.
MATLAB script must be executable without any errors and has to generate all graphical outputs that are in the report.
Deadline: 26 February 2023, 23:59.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="week-4---particle-filter"><a class="header" href="#week-4---particle-filter">Week 4 - Particle Filter</a></h1>
<p>The goal of this assignment is to implement a working localization algorithm based on the particle filter.</p>
<p>Create a single A4 report that will describe your approach to the exercise (3-6 sentences for each task and a picture, if it makes sense).</p>
<h2 id="task-1-2"><a class="header" href="#task-1-2">Task 1</a></h2>
<p>Implement the prediction function that takes the particle pose and the control input as arguments and returns the new pose. Apply the probabilistic motion model.</p>
<h2 id="task-2-2"><a class="header" href="#task-2-2">Task 2</a></h2>
<p>Implement the measurement function that takes the map, the particle pose, and the sensor orientations as arguments and return a vector of measured distances without any noise.</p>
<p>You may take advantage of the simulator function <code>ray_cast</code> which is used as follows:</p>
<p><code>intersections = ray_cast(ray_origin, walls, dir_rad)</code></p>
<p>The first argument is position of initial point of a ray, the second argument is the description of walls stored in <code>read_only_vars.map.walls</code>, and the final argument is direction of 
the ray in radians. The function returns all intersection of the given ray with the walls.</p>
<h2 id="task-3-2"><a class="header" href="#task-3-2">Task 3</a></h2>
<p>Initialize a set of particles at random poses within the map. Implement the resampling algorithm and make the particles converge to the actual agent pose via an appropriate weighting 
function (apply the outcomes of the previous task). You should be able to present a screenshot with a cluster of particles gathered around the agent. You may need to move the agent 
to make the particles converge.</p>
<h2 id="submission-2"><a class="header" href="#submission-2">Submission</a></h2>
<p>Send the report and all related MATLAB scripts to <a href="mailto:resources/assignment_3_particle_filter/tomas.lazna@ceitec.vutbr.cz">tomas.lazna@ceitec.vutbr.cz</a>.
MATLAB script must be executable without any errors and has to generate all graphical outputs that are in the report.
Deadline: 5 March 2023, 23:59.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="week-5---kalman-filter"><a class="header" href="#week-5---kalman-filter">Week 5 - Kalman Filter</a></h1>
<p>Bublebum</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="week-6---path-planning"><a class="header" href="#week-6---path-planning">Week 6 - Path Planning</a></h1>
<p>Bublebum</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="matlab-robot-simulator"><a class="header" href="#matlab-robot-simulator">MATLAB Robot Simulator</a></h1>
<p>The simulator is lightweight, MATLAB-based tool for testing key algorithms utilized for navigation in mobile robotics. Basically, it integrates differential drive mobile robot model equipped with two different sensors (LiDAR and GNSS), and  enables to deploy it within custom 2D maps. The main goal is to navigate the robot from start to goal position; for this reason, several algorithms must be implemented:</p>
<ul>
<li><strong>Localization</strong>: two algorithms are needed - for outddor and indoor. The pose may be estimated via Extended Kalman Filter and GNSS data in outdoor areas; for indoor, the algorithm utilizing Particle Filter and known map is more suitable since there is a GNSS denied zone indoor.</li>
<li><strong>Path planning</strong>: an algorithm to find optimal, obstacle-free path from the start to goal location (eg. A* and Dijkstra's algorithms).</li>
<li><strong>Motion control</strong>: a control strategy to follow the computed path by using the actual estimated pose. This results to the control commands for the individual wheels.</li>
</ul>
<h2 id="variables"><a class="header" href="#variables">Variables</a></h2>
<p>The simulator uses numerous variables to provide its function; however, not all of them can be used/red to solve the task (the robot's true position, for example). The variables are divided into three groups (structures):</p>
<ul>
<li><strong>Private variables</strong> (<code>private_vars</code>): <strong>do not use</strong> these variables in your code!</li>
<li><strong>Read only variables</strong> (<code>read_only_vars</code>): these are accessible for your code, but <strong>do not modify</strong> them!</li>
<li><strong>Public variables</strong> (<code>public_vars</code>): feel free to use and modify these variables.</li>
</ul>
<p>Except these variable groups, there are multiple other variables in your workspace, but there is no limit to their use. Own variables can of course be added.</p>
<h2 id="simulation-loop"><a class="header" href="#simulation-loop">Simulation Loop</a></h2>
<p>The simulator workspace comprise <code>main.m</code> script, which contains the main simulator logic/loop and is used to run the simulation (<code>F5</code> key). After the initialization part (you can add your own variables there), there is a <code>while true</code> infinity simulation loop with the following components:</p>
<ol>
<li><strong>Move robot</strong>: the <code>move_agent</code> function physically moves the robot according the <code>agent_motion_vector</code> control variable.</li>
<li><strong>Check goal</strong>: check if goal has been reached.</li>
<li><strong>Check collision</strong>: check whether the robot has not hit the wall.</li>
<li><strong>Check presence</strong>: check whether the robot has not left the arena.</li>
<li><strong>Check particles</strong>: check the particle limit.</li>
<li><strong>LiDAR measurement</strong>: read the LiDAR data using the <code>perform_measurements</code> function, save it into <code>read_only_vars.measurement_distances</code> variable.</li>
<li><strong>GNSS measurement</strong>: read the GNSS data using the <code>gnss_measure</code> function, save it into <code>read_only_vars.gnss_pose</code> variable.</li>
<li><strong>Estimate position</strong>: place your <strong>POSE ESTIMATION</strong> algorithm here, and save the result into the <code>public_vars.estimated_pose</code> variable.</li>
<li><strong>Path planning</strong>: place your <strong>PATH PLANNING</strong> algorithm here, and save the result into the <code>public_vars.path</code> variable.</li>
<li><strong>Plan motion</strong>: place your <strong>MOTION CONTROL</strong> algorithm here, and save the result into the <code>agent_motion_vector</code> variable (<code>[v_right, v_left]</code>).</li>
<li><strong>GUI rendering</strong>: render the game state in a Figure window.</li>
</ol>
<p>In general, you should modify the steps 8.-10. only.</p>
<h2 id="custom-functions"><a class="header" href="#custom-functions">Custom Functions</a></h2>
<p>To preserve code readability, do not place the code of your algorithms directly into the simulation loop; instead, organize it logically into functions, and place them into the <code>algorithms</code> directory.</p>
<h2 id="maps-and-testing"><a class="header" href="#maps-and-testing">Maps and testing</a></h2>
<p>The <code>resources</code> directory contains several maps in the text file format, which are parsed in real-time when the simulation is started. Use reverse engineering to understand the syntax, and create own maps to test your algorithms thoroughly. In general, the syntax includes the definition of the goal position, map dimensions, wall positions, and GNSS-denied polygons. Do not forget to test various start poses as well (including start angle!); this is adjustable via <code>start_position</code> variable. For the project evaluation, a comprehensive map comprising both indoor and outdoor areas and GNSS-denied zones will be employed.</p>
<h2 id="gui"><a class="header" href="#gui">GUI</a></h2>
<img src="resources/simulator/imgs/mpc-map-legend.png" alt="sensor model" width="100%"/>
<div style="break-before: page; page-break-before: always;"></div><h1 id="semester-project"><a class="header" href="#semester-project">Semester Project</a></h1>
<h2 id="c√≠le-projektu"><a class="header" href="#c√≠le-projektu">C√≠le projektu</a></h2>
<p>C√≠lem semestr√°ln√≠ho projektu je vytvo≈ôit algoritmus pro p≈ôedlo≈æen√Ω simul√°tor v Matlabu, pomoc√≠ kter√©ho dojede robot do c√≠le v co nejmen≈°√≠m poƒçtu iterac√≠. 
Algoritmus mus√≠ fungovat pro r≈Øzn√© mapy, poƒç√°teƒçn√≠ pozice startu a natoƒçen√≠ robotu a pozice c√≠le; robot nesm√≠ nar√°≈æet do p≈ôek√°≈æek a p≈ôej√≠≈ædƒõt hranice mapy. 
Nezbytn√Ωm minimem pro splnƒõn√≠ projektu je √∫spƒõ≈°n√© zvl√°dnut√≠  v≈°ech p≈ôedlo≈æen√Ωch vzorov√Ωch map ve slo≈æce <code>resources</code>. Metody vhodn√© pro splnƒõn√≠ zad√°n√≠ budou 
probr√°ny na p≈ôedn√°≈°k√°ch a cviƒçen√≠ch, ne v≈°echny mus√≠ b√Ωt pou≈æity. Pro splnƒõn√≠ zad√°n√≠ je mo≈æn√© pouze vyƒç√≠tat data ze struktur <code>read_only_vars</code> (mapa, data 
ze senzor≈Ø, parametry podvozku, aj.) a <code>public_vars</code>, nastavovat rychlosti robotu v promƒõnn√© <code>agent_motion_vector</code> a zapisovat do struktury <code>public_vars</code> 
(pro √∫ƒçely vizualizace). Nen√≠ mo≈æn√© modifikovat z√°kladn√≠ strukturu hlavn√≠ smyƒçky simul√°toru.</p>
<h2 id="simul√°tor"><a class="header" href="#simul√°tor">Simul√°tor</a></h2>
<p>Simul√°tor je dostupn√Ω v repozit√°≈ôi: <a href="https://github.com/Robotics-BUT/MPC-MAP-Student">https://github.com/Robotics-BUT/MPC-MAP-Student</a> Simul√°tor nesm√≠ b√Ωt modifikov√°n, hodnotit se bude na p≈ôedlo≈æen√©m simul√°toru.</p>
<p>Va≈°e ≈ôe≈°en√≠ mus√≠ b√Ωt spustiteln√© bez Matlab toolbox≈Ø.</p>
<p>V p≈ô√≠padƒõ nalezen√≠ chyby v simul√°toru ze strany vyuƒçuj√≠c√≠ch i student≈Ø bude vyd√°na nov√° verze s opravou, o kter√© budou studenti informov√°n√≠.</p>
<h2 id="zp≈Øsob-hodnocen√≠"><a class="header" href="#zp≈Øsob-hodnocen√≠">Zp≈Øsob hodnocen√≠</a></h2>
<p>Vytvo≈ôen√Ω algoritmus bude vyuƒçuj√≠c√≠mi otestov√°n na r≈Øzn√Ωch map√°ch s r≈Øzn√Ωmi sou≈ôadnicemi (vƒçetnƒõ orientace) startu a c√≠le. √öspƒõ≈°nost dojet√≠ do c√≠le a pot≈ôebn√Ω poƒçet iterac√≠ bude vyhodnocen statisticky opakovan√Ωm spou≈°tƒõn√≠m algoritmu.</p>
<h2 id="odevzd√°n√≠"><a class="header" href="#odevzd√°n√≠">Odevzd√°n√≠</a></h2>
<p>Projekt odevzdejte ve formƒõ komprimovan√©ho souboru obsahuj√≠c√≠ cel√Ω spustiteln√Ω projekt v Matlab elektronicky na email <a href="mailto:resources/semester_project/tomas.lazna@ceitec.vutbr.cz">tomas.lazna@ceitec.vutbr.cz</a> do konce 8. t√Ωdne semestru (2. 4. 2023, 23:59).</p>
<h2 id="bodov√©-hodnocen√≠"><a class="header" href="#bodov√©-hodnocen√≠">Bodov√© hodnocen√≠</a></h2>
<ul>
<li>√öspƒõ≈°nost dojet√≠ do c√≠le: 15 b</li>
<li>Pot≈ôebn√Ω poƒçet iterac√≠: 15 b</li>
<li>Technick√© ≈ôe≈°en√≠: 20 b</li>
<li>Penalizace a≈æ -20 b, pokud projekt nelze spustit bez chyb</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
